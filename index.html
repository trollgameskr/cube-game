<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="3x3 큐브 퍼즐 게임 - GitHub Pages용 웹앱">
    <title>3x3 큐브 퍼즐 게임</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <button type="button" id="focus-exit-btn" aria-label="집중 모드 종료">집중 모드 종료 (Esc)</button>
    <div class="app">
        <header class="app-header">
            <h1>3D 3x3 큐브 게임</h1>
            <p>큐브를 드래그해 회전하고, 빈 공간을 드래그해 화면을 이동하세요. 핀치나 휠로 확대/축소할 수 있습니다.</p>
        </header>

        <main class="app-main">
            <section class="cube-section" aria-labelledby="cube-title">
                <h2 id="cube-title" class="sr-only">3D 큐브</h2>
                <div class="cube-stage" id="cube-stage"></div>
                <p class="cube-hint">큐브 위를 드래그하면 회전, 빈 공간을 드래그하면 팬 이동, 터치 핀치나 마우스 휠로 줌이 가능합니다.</p>
            </section>

            <section class="control-section" aria-labelledby="control-title">
                <h2 id="control-title" class="sr-only">조작 패널</h2>

                <div class="hud">
                    <div class="hud-item">이동 수 <strong id="move-count">0</strong></div>
                    <div class="hud-item">최근 이동 <span id="move-log">-</span></div>
                </div>

                <div id="message" class="message">섞기 버튼으로 게임을 시작하세요!</div>

                <div class="actions">
                    <button type="button" id="scramble-btn" class="btn primary">섞기</button>
                    <button type="button" id="reset-btn" class="btn">리셋</button>
                    <button type="button" id="hint-btn" class="btn">힌트</button>
                    <button type="button" id="focus-btn" class="btn">집중 모드</button>
                </div>

                <div class="hotkeys">
                    <h3>단축키 안내</h3>
                    <p>U, D, L, R, F, B 키로 면 회전 • Shift+키는 반시계 방향 • Space로 최근 메시지 확인 • T로 뒷면 보기 토글 • Esc로 집중 모드 전환</p>
                    <button type="button" id="customize-keys-btn" class="btn btn-small">단축키 커스터마이징</button>
                </div>
            </section>
        </main>

        <footer class="app-footer">
            <small>정적 파일만으로 동작하므로 GitHub Pages에 바로 배포할 수 있습니다.</small>
        </footer>
    </div>

    <!-- Keyboard Customization Modal -->
    <div id="keyboard-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>단축키 커스터마이징</h2>
                <button type="button" id="close-modal-btn" class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <p class="modal-instruction">각 기능에 원하는 키를 할당하려면 입력 필드를 클릭하고 키를 누르세요.</p>
                <div class="key-mapping-list">
                    <div class="key-mapping-item">
                        <label>위(Up) 면 회전:</label>
                        <input type="text" id="key-U" readonly placeholder="키를 누르세요">
                        <span class="key-display" data-key="U"></span>
                    </div>
                    <div class="key-mapping-item">
                        <label>아래(Down) 면 회전:</label>
                        <input type="text" id="key-D" readonly placeholder="키를 누르세요">
                        <span class="key-display" data-key="D"></span>
                    </div>
                    <div class="key-mapping-item">
                        <label>왼쪽(Left) 면 회전:</label>
                        <input type="text" id="key-L" readonly placeholder="키를 누르세요">
                        <span class="key-display" data-key="L"></span>
                    </div>
                    <div class="key-mapping-item">
                        <label>오른쪽(Right) 면 회전:</label>
                        <input type="text" id="key-R" readonly placeholder="키를 누르세요">
                        <span class="key-display" data-key="R"></span>
                    </div>
                    <div class="key-mapping-item">
                        <label>앞(Front) 면 회전:</label>
                        <input type="text" id="key-F" readonly placeholder="키를 누르세요">
                        <span class="key-display" data-key="F"></span>
                    </div>
                    <div class="key-mapping-item">
                        <label>뒤(Back) 면 회전:</label>
                        <input type="text" id="key-B" readonly placeholder="키를 누르세요">
                        <span class="key-display" data-key="B"></span>
                    </div>
                    <div class="key-mapping-item">
                        <label>뒷면 보기 토글:</label>
                        <input type="text" id="key-toggleTransparency" readonly placeholder="키를 누르세요">
                        <span class="key-display" data-key="toggleTransparency"></span>
                    </div>
                </div>
                <div class="modal-actions">
                    <button type="button" id="reset-keys-btn" class="btn">기본값으로 초기화</button>
                    <button type="button" id="save-keys-btn" class="btn primary">저장</button>
                </div>
            </div>
        </div>
    </div>

    <script type="module" src="lib/three-global.js"></script>
    <script src="game.js" defer></script>
</body>
</html>
